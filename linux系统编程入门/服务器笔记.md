
- [第一章：linux系统编程入门学习](#第一章linux系统编程入门学习)
  - [vscode更新弹出报错](#vscode更新弹出报错)
  - [静态库的优缺点](#静态库的优缺点)
  - [动态库的优缺点](#动态库的优缺点)
  - [Makefile](#makefile)
    - [Makefile命名与规则](#makefile命名与规则)
- [Linux指令学习](#linux指令学习)
  - [Linux下“/”和“~”的区别](#linux下和的区别)
  - [__删除命令__](#删除命令)
    - [rm -rf ：删除文件夹](#rm--rf-删除文件夹)
    - [rm :删除文件](#rm-删除文件)
    - [rmdir:删除空的目录](#rmdir删除空的目录)
  - [touch命令](#touch命令)
  - [vim](#vim)
    - [__Esc__:退出编辑模式](#esc退出编辑模式)
    - [__:wq__ 保存并退出，注意有冒号](#wq-保存并退出注意有冒号)
  - [Zip命令：压缩Zip文件](#zip命令压缩zip文件)
  - [unzip命令：解压zip文件](#unzip命令解压zip文件)
  - [GDB命令](#gdb命令)
    - [启动、退出、查看代码](#启动退出查看代码)
    - [调试命令](#调试命令)
  - [mv命令：命令用来为文件或目录改名、或将文件或目录移入其它位置。](#mv命令命令用来为文件或目录改名或将文件或目录移入其它位置)
  - [mkdir命令：用于创建目录（文件夹）、](#mkdir命令用于创建目录文件夹)
  - [01标准c库IO函数](#01标准c库io函数)
  - [02标准c库IO和linux系统IO的关系](#02标准c库io和linux系统io的关系)
  - [03虚拟地址空间](#03虚拟地址空间)
  - [04文件描述符](#04文件描述符)
  - [linux系统IO函数](#linux系统io函数)
    - [open函数](#open函数)
    - [read函数](#read函数)
    - [write函数](#write函数)
  - [文件属性操作函数](#文件属性操作函数)
    - [access函数](#access函数)
    - [chmod函数](#chmod函数)
    - [truncate函数](#truncate函数)
  - [目录操作函数](#目录操作函数)
    - [mkdir函数:创建目录](#mkdir函数创建目录)
    - [rename函数](#rename函数)
    - [chdir函数：修改进程的工作目录 \& getcwd函数：获取当前工作目录](#chdir函数修改进程的工作目录--getcwd函数获取当前工作目录)


# 第一章：linux系统编程入门学习
## vscode更新弹出报错
![图 1](images/c2c91cefd0118e9428f56877ae12ef181f12c7a77544fb6524805d91e5c1bee5.png)  
- __解决方法__：找到报错文件夹，右键-属性-安全-user的权限拉满

-Ctrl+L 一键清空命令行

## 静态库的优缺点
![图 2](../images/2d807887465ed02d849384b0cfa41f9823edfc7f24dab4a3248ead9aff66aa29.png)  
## 动态库的优缺点
![图 3](../images/42de232f58641137994a0e1e3a728226e2787497fa50bd41da4f2a2ec144c661.png)  

## Makefile
![图 4](../images/12d4d7b235330f89747b109f4b638ff38aa773237eefc789dd808892031a4dfa.png)  
### Makefile命名与规则
![图 5](../images/3633d3e512c3cb4d0166435537bb3ef50bf99f9587375cdb44fc6760d15ca616.png)  



# Linux指令学习
## Linux下“/”和“~”的区别
”/“是根目录，”~“是家目录。
~~~
#家目录
cd
cd ~
#根目录
cd /
~~~
## __删除命令__
### rm -rf ：删除文件夹 
~~~
rm -rf xxx/xx
~~~
### rm :删除文件
~~~
rm xxx.xx
~~~
### rmdir:删除空的目录
- 语法
~~~
rmdir [-p] dirName
~~~
- 参数
-p 是当子目录被删除后使它也成为空目录的话，则顺便一并删除。
## touch命令
touch命令用于修改文件或者目录的时间属性，包括存取时间和更改时间。若文件不存在，系统会建立一个新的文件。
- 语法
~~~
touch [-acfm][-d<日期时间>][-r<参考文件或目录>] [-t<日期时间>][--help][--version][文件或目录…]
~~~

## vim
### __Esc__:退出编辑模式
### __:wq__ 保存并退出，注意有冒号

## Zip命令：压缩Zip文件
- 语法
~~~
zip [选项] [压缩文件] [文件]
~~~
![图 6](../images/c0e4199bbd6a83aaf610ef1977bf181df6f655d62dc96a891712014d56f30061.png)  

## unzip命令：解压zip文件
- 语法
~~~
unzip [选项] 压缩包名
~~~
![图 7](../images/8d5ab52645c8c95c3b95d81bc65adf4a81732b9abf4323c4415cb50ed814c858.png)  

## GDB命令
### 启动、退出、查看代码
- 准备工作
~~~
gcc -g -Wall program.c -o program
# -g的作用是在可执行文件中加入源代码的信息
~~~
- 启动和退出
~~~
gdb [可执行（调试）文件]
quit
~~~
- 给程序设置参数/获取设置参数
~~~
set args 10 20
show args
~~~
- GDB使用帮助
~~~
help
~~~
- 查看当前文件代码
~~~
#list/l是list或l
list/l        #从默认位置显示
list/l 行号   #从指定的行显示
list/l 函数名 #从指定的函数显示
~~~
- 查看非当前文件代码
~~~
list/l 文件名：行号
list/l 文件名：函数名
~~~
- 设置显示的行数
~~~
show list/listsize
set list/listsize
~~~
- 设置断点
~~~
b/break 行号
b/break 函数名
b/break 文件名：行号
b/break 文件名：函数
~~~
- 查看断点
~~~
i/info b/break
~~~
- 删除断点
~~~
d/del/delete 断点编号
~~~
- 设置断点无效/有效
~~~
dis/disable 断点编号
ena/enalbe 断点编号
~~~

- 设置条件断点（一般在循环的位置）
~~~
b/break 10 if i==5
~~~

### 调试命令
- 运行GDB程序
~~~
start(程序停在第一行)
run（遇到断点才停）
~~~
- 继续运行，到下一个断点才停
~~~
c/continue
~~~
- 向下执行一行代码（不会进入函数体）
~~~
n/next
~~~
- 变量操作
~~~
p/print 变量名 （打印变量值）
ptype 变量名 （打印变量类型）
~~~
- 向下单步调试（遇到函数进入函数体）
~~~
s/step
finish(跳出函数体)
~~~
- 自动变量操作
~~~
display num（自动打印指定变量的值）
i/info display
undisplay 编号
~~~
- 其他操作
~~~
set var 变量名=变量值
until （跳出循环）
~~~


## mv命令：命令用来为文件或目录改名、或将文件或目录移入其它位置。

## mkdir命令：用于创建目录（文件夹）、
- 语法
~~~
mkdir [-p] dirName
# -p确保目录名称存在，不存在就建一个
~~~


## 01标准c库IO函数
![图 8](../images/51d1f584a89161f09231111204b2ecb45bf711795c0c1332db84d524d6dd9b33.png)  
## 02标准c库IO和linux系统IO的关系
![图 9](../images/37a44050be18ba2b3c60b7e225e2a41ec8b20aa80c6278aeeff619e55086dffa.png)  
## 03虚拟地址空间
![图 10](../images/ff6be009dcecc0d16d2895123f6a8b064520d7445bd5d20dcd3a4d2d183c3617.png)  

## 04文件描述符
![图 11](../images/ef60a9d97bc685ad43c1284c3797ea9520449a06042064d08d86d12a909935bf.png)  
- 文件描述符表是数组 因为一个进程可以同时打开多个文件
- 大小默认是1024：最大能同时打开文件的个数1024个
- linux：一切皆文件

## linux系统IO函数
![图 12](../images/4c67fcd35965df3c15f2b90eff8b7926efd056d7e1069b734d630a906f9b8487.png)  

### open函数
- 函数详解：
~~~c
/*
    #include <sys/types.h>
    #include <sys/stat.h>
    #include <fcntl.h>
    //打开一个已经存在的文件
    int open(const char *pathname, int flags);
        参数：
            - pathname：要打开的文件路径
            - flags：对文件的操作权限设置还有其他的设置
             O_RDONLY（只读）, O_WRONLY（只写）, or O_RDWR（可读可写），这三个设置是互斥的
        返回值:The return value of open() is a file descriptor(文件描述符)，调用失败返回-1
    errno：属于linux系统函数库，库里的一个全局变量，记录的是最近的错误号
    #include <stdio.h>
    void perror(const char *s);
    作用：打印errno对应的错误描述
        s参数：用户描述，比如hello，最终输出的内容是hello：xxx（实际的错误描述
    //创建一个新的文件
    int open(const char *pathname, int flags, mode_t mode);
*/
~~~
- 函数示例：
~~~c
#include <sys/types.h>
#include <sys/stat.h>
#include <fcntl.h>
#include <stdio.h>
#include <unistd.h>

int main(){
    int fd = open("a.txt",O_RDONLY);
    if(fd == -1){
        perror("open");
    }
    //读写操作

    //关闭
    close(fd);

    return 0;
}
~~~
### read函数  
- 函数详解：
~~~
#include <unistd.h>
ssize_t read(int fd, void *buf, size_t count);
        参数：
                - fd：文件描述符，open得到的，通过文件描述符操作某个文件
                - buf:需要读取数据存放的地方，数组的地址(传出参数)
                - count：指定的数组的大小
        返回值：
                - 成功：
                        >0:返回实际的读取到的字节数
                        =0：文件已经读取完了
                - 失败：-1，并设置errno
~~~
- 函数示例：
~~~
~~~
### write函数
- 函数详解：
~~~c
/*
#include <unistd.h>

ssize_t write(int fd, const void *buf, size_t count);
        参数：
                - fd：文件描述符，open得到，通过这个文件描述符操作某个文件
                - buf：要往磁盘写入的数据
                - count；要写的数据的实际的大小
        返回值：
                成功：实际写入的字节数
                失败：-1，并设置errno
*/
~~~
## 文件属性操作函数
![图 13](../images/cb632fff82109327eea08a40e1d85f82907818813e71d2ce7c22b1d29a0b756a.png)  

### access函数
- 函数详解
~~~c
/*
    #include <unistd.h>
    int access(const char *pathname, int mode);
        作用：判断某个文件是否有某个权限，或者判断文件是否存在
        参数：
            - pathname: 判断的文件路径
            - mode:
                R_OK: 判断是否有读权限
                W_OK: 判断是否有写权限
                X_OK: 判断是否有执行权限
                F_OK: 判断文件是否存在
        返回值：成功返回0， 失败返回-1
*/
~~~
- 函数示例：
~~~c
#include <unistd.h>
#include <stdio.h>

int main() {

    int ret = access("a.txt", F_OK);
    if(ret == -1) { 
        perror("access");
    }

    printf("文件存在！！!\n"); 

    return 0;
}
~~~
### chmod函数
~~~c
/*
    #include <sys/stat.h>
    int chmod(const char *pathname, mode_t mode);
        修改文件的权限
        参数：
            - pathname: 需要修改的文件的路径
            - mode:需要修改的权限值，八进制的数
        返回值：成功返回0，失败返回-1

*/
~~~
- 函数示例：
~~~c
#include <sys/stat.h>
#include <stdio.h>
int main() {

    int ret = chmod("a.txt", 0777);

    if(ret == -1) {
        perror("chmod");
        return -1;
    }

    return 0;
}
~~~
### truncate函数
- 函数详解：
~~~c
/*
    #include <unistd.h>
    #include <sys/types.h>
    int truncate(const char *path, off_t length);
        作用：缩减或者扩展文件的尺寸至指定的大小
        参数：
            - path: 需要修改的文件的路径
            - length: 需要最终文件变成的大小
        返回值：
            成功返回0， 失败返回-1
*/
~~~
- 函数示例：
~~~c
#include <unistd.h>
#include <sys/types.h>
#include <stdio.h>

int main() {

    int ret = truncate("b.txt", 5);

    if(ret == -1) {
        perror("truncate");
        return -1;
    }

    return 0;
}
~~~

## 目录操作函数
![图 14](../images/5086563916effb29d4c747fa9064f21aef9611eb9c8e6105c076db312a1baa1f.png)  
### mkdir函数:创建目录
- 函数详解：
~~~c
/*
    #include <sys/stat.h>
    #include <sys/types.h>
    int mkdir(const char *pathname, mode_t mode);
        作用：创建一个目录
        参数：
            pathname: 创建的目录的路径
            mode: 权限，八进制的数
        返回值：
            成功返回0， 失败返回-1
*/
~~~
- 函数示例：
~~~c
#include <sys/stat.h>
#include <sys/types.h>
#include <stdio.h>

int main() {

    int ret = mkdir("aaa", 0777);

    if(ret == -1) {
        perror("mkdir");
        return -1;
    }

    return 0;
}
~~~
### rename函数
- 函数详解：
~~~c
/*
    #include <stdio.h>
    int rename(const char *oldpath, const char *newpath);

*/
~~~
- 函数示例：
~~~c
#include <stdio.h>

int main() {

    int ret = rename("aaa", "bbb");

    if(ret == -1) {
        perror("rename");
        return -1;
    }

    return 0;
}
~~~

### chdir函数：修改进程的工作目录 & getcwd函数：获取当前工作目录

- 函数详解：
~~~c
/*

    #include <unistd.h>
    int chdir(const char *path);
        作用：修改进程的工作目录
            比如在/home/nowcoder 启动了一个可执行程序a.out, 进程的工作目录 /home/nowcoder
        参数：
            path : 需要修改的工作目录

    #include <unistd.h>
    char *getcwd(char *buf, size_t size);
        作用：获取当前工作目录
        参数：
            - buf : 存储的路径，指向的是一个数组（传出参数）
            - size: 数组的大小
        返回值：
            返回的指向的一块内存，这个数据就是第一个参数

*/
~~~
- 函数示例：
~~~c
#include <unistd.h>
#include <stdio.h>
#include <sys/stat.h>
#include <sys/types.h>
#include <fcntl.h>

int main() {

    // 获取当前的工作目录
    char buf[128];
    getcwd(buf, sizeof(m));
    printf("当前的工作目录是：%s\n", buf);

    // 修改工作目录
    int ret = chdir("/home/nowcoder/Linux/lesson13");
    if(ret == -1) {
        perror("chdir");
        return -1;
    }

    // 创建一个新的文件
    int fd = open("chdir.txt", O_CREAT | O_RDWR, 0664);
    if(fd == -1) {
        perror("open");
        return -1;
    }

    close(fd);

    // 获取当前的工作目录
    char buf1[128];
    getcwd(buf1, sizeof(buf1));
    printf("当前的工作目录是：%s\n", buf1);

    return 0;
}
~~~


